* 股价板块的强弱
* 突破时的成交量
* 由K线走势构成基础的笔
* 笔构成线段，频繁交错的笔会在线段中形成中枢
* 中枢就是震荡，是子趋势反复震荡的空间
* 连接线段的起点与终点，可以构成更大级别的笔，与更大级别的线段
* 当离开中枢时才能构成新的走势，有机会形成新的线段
* 只由一个中枢的走势是盘整，存在超过一个中枢的走势才叫趋势
    * 也就是必须存在上涨，震荡，突破继续上涨破位，再震荡，继续突破，才能称为上涨趋势
    * 如果是上涨，回抽震荡，继续上涨，不构成趋势
* 进一步梳理走势级别与流程
    * 基本构成：K线
        * 相邻的两条K线{K1, K2}存在三种形式
            * $K_1.high < K_2.high \&\& K_1.low < K_2.low$
                * 是上升K线
            * $K_1.high > K_2.high \&\& K_1.low > K_2.low$
                * 是下降K线
            * 不属于上述两种情况
                * 视作盘整K线，这种情况将K1与K2合并，并将合并后的K线K2'与后续K线对比，以验证上涨或下跌趋势
                * 当二者最高值或最低值相等时，同样视作盘整K线，严格按照上述公式加以判断
                * 相邻的盘整K线后不论出现什么形态，均正常处理即可，即使跌回盘整区间，也不应当对盘整区间做进一步的扩充
                * 所有相邻的盘整K线，再后续的形态判断中，应当视作一条虚拟K线/盘整K线，参与判断（以下所描述的K线均包含盘整K线）
                    * 合并K线的最高值为盘整K线中所有K线的最高值
                    * 合并K线的最低值为盘整K线中所有K线的最低值
        * 顶分型与底分型
            * 如果一条K线与左侧K线形成上升K线，与右侧K线K线构成下降K线，则称相应的三条K线构成的形态为顶分型，其中$K_n$为顶分型的顶点K线
                * 当构成顶分型的顶点K线位盘整K线时，顶分型的顶点K线为盘整K线中的第一个最高点
            * 相反，如果一条K线与左侧K线形成下降K线，与右侧K线构成上升K线那么将这三条K线构成的形态为底分型底分型，其中$K_n$为底分型的顶点K线
                * 针对盘整K线，底分型的顶点K线为盘整K线中的第一个最低点
            * 对于连续出现的相邻顶底分型，视作普通的顶底分型正常处理即可
                * 在小幅震荡区间所形成的顶底分型，会在线段中作最小中枢区间验证
        * 现在我们明确定义了顶分型与底分型，我们得出以下结论
            * 顶分型与底分型必然是交错出现的
            * 顶分型与底分型可以相邻，并且公用K线
            * 顶分型与底分型是行情转折/走向震荡的标识，但是需要结合压力支撑位来看
            * 顶底分型的滞后性
                * 顶分型与底分型需要在其右侧K线确认后，完成构成，所以其会滞后于行情转折点一个交易日(以收盘记)
    * 基本构成：笔(Path)
        * 笔的构成较为简单，只需要将顶分型与底分型依此连接即可
        * 两个相邻的笔存在且仅存在一条共享K线(不包含盘整K线)，也即顶分型/底分型的中心K线
        * 笔的滞后性
            * 笔在顶底分型构成确认时，即可确认，所以其与顶底分型一致，会滞后于行情转折点一个交易日(以收盘记)
    * 基本构成：线段(Polyline)
        * 对于一组相邻的笔，{$Path_1, Path_2, Path_3, ...Path_n$}，选取其中奇数位的笔，将其标记为关键笔, {$Path_1, Path_3, ...Path_n$}
        * 选取笔组合中偶数位的笔，将其标记为附属笔
        * 针对关键笔，以与上述K线完全相同的方式，寻得并合并盘整关键笔，并确认上升关键笔，下降关键笔
        * 对于上升线段，其所有相邻的关键笔组合皆能构成上升关键笔，对于下降线段，其所有相邻的关键笔组合皆能构成下降关键笔
        * 一个线段至少存在两个关键笔，一个附属笔
        * 当一个关键笔$Path_(2n+1)$与左侧关键笔$Path_(2n-1)$构成上升关键笔，与右侧关键笔$Path_(2n+3)$构成下降关键笔时,关键笔$Path_(2n+1)$的末尾即为当前线段的末尾，同时笔$Path_(2n+2)$, $Path_(2n+3)$会从当前线段中移除，加入至新的线段当中
        * 中枢
            * 对于一组连续的关键笔{$Path_1, Path_3, ...Path_n$}，如果其中存在连续的重叠区域，并且宽度大于五条K线，那么定义重叠区域为一个中枢
        * 震荡中枢
            * 如果一个中枢内包含三个以上的笔，那么这个中枢被称为震荡中枢
        * 可以得出以下结论
            * 线段的结束判定要滞后于线段结束位置至少两笔，因为关键笔的走势一定都是上升或都是下降的，所以在一个关键笔结束后，存在且仅存在如下几种情况
                * 上升线段
                    * 附属笔没有跌破前关键笔的最低点后，即产生底分型，转为关键笔
                        * 不管关键笔如何走，只可能是盘整或是上升，所以不会影响线段的结束
                    * 附属笔跌破前关键笔的最低点后
                        * 当附属笔结束后，关键笔如果突破前高，则形成盘整笔
                        * 当附属笔结束后，关键笔如果没有突破前高，则形成下降关键笔
                        * 这种情况需要密切关注后续关键笔的走势
                * 下降线段
                    * 附属笔没有涨破前关键笔的最高点后，即产生顶分型，转为关键笔
                        * 不管关键笔如何走，只可能是盘整或是下降，所以不会影响线段的结束
                    * 附属笔涨破前关键笔的最高点后
                        * 当附属笔结束后，关键笔如果跌破前低，则形成盘整笔
                        * 当附属笔结束后，关键笔如果没有跌破前低，则形成上升关键笔
                        * 这种情况需要密切关注后续关键笔的走势
                * 线段的滞后性
                    * 当附属笔结束，且没有突破可能时，新的关键笔刚刚生成，走势从不确定到确定间隔了一个笔(附属笔的形成到结束)
                    * 当附属笔尚未结束，但已经存在突破可能时，需要等待新的关键笔是否突破前高/前低，才能确定新的关键笔是否依旧归属于当前线段，走势从不确定到确定间隔了约两个笔(附属笔的形成与结束，新的关键笔突破前高/前低/结束)
                * 相邻的两个线段，一定一个为上升线段，一个为下降线段，并且一个关键笔为奇数笔，一个关键笔为偶数笔
    * 买卖点
        * 第一类买点
            * 对与下降线段中的关键笔，如果相邻的关键笔的终点股价差值逐渐缩小，并且MACD即将上传0轴，那么视为行情即将逆转的标志，买入时有概率买在最低点
            * 对于下降线段中的关键笔，如果最后一个关键笔与前一个关键笔的终点股价差值逐渐缩小，并且MACD即将上传0轴，那么视为行情即将逆转的标志，买入时有概率买在最低点
        * 第二类买点
    * 数据结构
        * 笔
            * 起点
            * 终点
            * 辅助函数
                * 下跌趋势还是上升趋势
            * 在K线起始阶段，可能无法构成笔
        * 线段
            * 起点
            * 终点
            * 辅助函数
                * 下跌还是上升趋势
                * 笔列表
    * 重新梳理逻辑
        * 首先对各种情况进行分类
        * 然后再去做总结
    * 如何构造笔
        * 合并全部可合并K线，并生成虚拟K线
        * 如果虚拟K线数量小于2条，退出
        * 判断第一条与第二条虚拟K线是上升K线还是下降K线，并构建第一个笔
        * 遍历全部虚拟K线
            * 如果虚拟K线与上一虚拟K线延续当前走势，那么将其加入当前笔
            * 如果虚拟K线与上一虚拟K线走势相反，那么将当前笔结束，并构建新的笔
    * 如何构造线段
        * 如果笔数量小于三条，退出
        * 判断第一与第三个笔，并构造第一个线段
        * 如果线段是上升
    * 笔的思路要重新梳理
        * 笔的起点与终点是K线趋势的转变
        * K线趋势
            * 如上
        * 这样的话，逻辑上会有这些参数
        * Start，End
        * StartPrice
        * EndPrice
        * 一段笔的End是下一段笔的Start，其中会存在一条重叠K线
        * 一段笔的EndPrice是下一段笔的StartPrice
        * 梳理过程
        * 遍历K线，找到第一个可以确定上升/下降趋势的K线组合
        * 根据相应趋势，生成第一个笔

* 线段的生成
    * 确定线段与关键笔
    * 对于标准的线段而言，其第一笔与线段的走势一定是一致的
    * 只有第一个线段是非标准线段
        * 如何确定第一个线段的走势
        * 依此判断相隔的两笔，找到第一对笔间走势与笔内走势一致的笔
        * 构造第一个线段
    * 从第一个线段的末尾开始继续向后遍历
        * 每次递增2，并判断下一个关键笔是否延续当前走势
        * 当延续当前走势或盘整时，合并入当前线段
        * 当走势转变时
            * 创建新线段
            * 线段的头为上一个线段的末尾+1
            * 调整循环变量为当前的头
            